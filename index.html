<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SIMBA - Sistem Informasi MSDS Bahan Kimia</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --blue: #0b8bd6;
      --muted: #6b7b80;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Inter, Arial, sans-serif;
      background: #f6f8f9;
      color: #123;
    }

    /* Header */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 28px;
      background: #fff;
      box-shadow: 0 1px 0 rgba(10, 10, 10, 0.03);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      color: var(--blue);
    }

    .nav {
      display: flex;
      gap: 18px;
    }

    .nav a {
      text-decoration: none;
      color: #123;
      font-weight: 500;
    }

    .nav a.active {
      color: var(--blue);
    }

    /* Container */
    .container {
      max-width: 1100px;
      margin: 24px auto;
      padding: 0 18px;
    }

    /* Hero */
    .hero {
      background: #fff;
      padding: 36px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(15, 32, 39, 0.04);
      text-align: center;
    }

    .hero h1 {
      font-size: 34px;
      color: var(--blue);
    }

    .hero p {
      margin-top: 8px;
      color: var(--muted);
    }

    /* Search */
    .search {
      margin: 18px auto;
      display: flex;
      justify-content: center;
    }

    .search input {
      width: 70%;
      padding: 14px 18px;
      border-radius: 30px;
      border: 1px solid #e6eef0;
      outline: none;
      font-size: 15px;
    }

    /* Cards */
    .top-cards {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 18px;
      margin-top: 18px;
    }

    .card {
      background: #fff;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(11, 28, 33, 0.04);
      text-align: left;
    }

    .small {
      color: var(--muted);
      font-size: 14px;
    }

    /* Grid */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 18px;
      margin-top: 18px;
    }

    .badge {
      display: inline-block;
      background: #eef;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: #056;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" width="28" height="28">
        <g transform="translate(6,6)">
          <path d="M20 2 L28 2 L28 6 L34 32 C34 36 30 40 26 40 C22 40 18 36 18 32 L24 6 L24 2 Z" fill="#e1f8fb" stroke="#0aa" stroke-width="1"/>
          <circle cx="25" cy="10" r="2.5" fill="#9ee8f6"/>
          <circle cx="22" cy="14" r="1.6" fill="#9ee8f6"/>
          <circle cx="28" cy="16" r="1.3" fill="#9ee8f6"/>
        </g>
      </svg>
      <span>SIMBA</span>
    </div>
    <nav class="nav">
      <a href="index.html" class="active">Beranda</a>
      <a href="msds.html">MSDS</a>
      <a href="pengujian.html">Pengujian</a>
      <a href="piktogram.html">Piktogram GHS</a>
      <a href="apd.html">APD</a>
    </nav>
  </header>

  <!-- Main -->
  <main class="container">
    <section class="hero">
      <h1>Selamat Datang di SIMBA</h1>
      <p>Sistem Informasi MSDS Bahan Kimia. Cari informasi MSDS, piktogram, dan APD dengan cepat & aman.</p>

      <!-- Search Bar -->
      <div class="search">
        <input id="search" placeholder="Cari nama/rumus kimia atau pengujian...">
      </div>

      <!-- Top Cards -->
      <div class="top-cards">
        <div class="card">
          <h3>Top 5 Bahan Kimia Populer</h3>
          <ol id="top5" class="small"></ol>
        </div>
        <div class="card" style="border-left:6px solid #ffd166">
          <h3>Piktogram of the Day</h3>
          <div id="ghsDay" class="small" style="margin-top:10px"></div>
        </div>
        <div class="card" style="border-left:6px solid #4fd1c5">
          <h3>Tips K3 of the Day</h3>
          <div id="tipsDay" class="small" style="margin-top:10px"></div>
        </div>
      </div>
    </section>

    <!-- Grid -->
    <section style="margin-top:22px">
      <h2 style="color:var(--blue)">Top Bahan Kimia</h2>
      <div id="topGrid" class="grid"></div>
    </section>
  </main>

  <!-- Script -->
  <script>
    let allData = [];

    // Load JSON
    async function loadData() {
      try {
        const r = await fetch('msds_data.json');
        return await r.json();
      } catch (e) {
        console.error(e);
        return [];
      }
    }

    // Render Top 5
    function renderTop5(data) {
      const t = document.getElementById('top5');
      t.innerHTML = '';
      data.slice(0, 5).forEach(d => {
        const li = document.createElement('li');
        li.textContent = d.Nama + ' (' + d.Formula + ')';
        t.appendChild(li);
      });
    }

    // Render Grid
    function renderTopGrid(data) {
      const g = document.getElementById('topGrid');
      g.innerHTML = '';
      data.forEach(d => {
        const c = document.createElement('div');
        c.className = 'card';
        c.innerHTML = `
          <strong>${d.Nama}</strong>
          <div class="small" style="margin-top:6px">${d.Formula}</div>
          <div class="badge">${d.Pengujian}</div>
        `;
        c.onclick = () => location = 'msds.html#' + encodeURIComponent(d.Nama);
        g.appendChild(c);
      });
    }

    // Piktogram of the Day
    function renderGhsDay() {
      const list = ['corrosive', 'flammable', 'toxic', 'health', 'oxidizer', 'environment'];
      const idx = new Date().getDate() % list.length;
      document.getElementById('ghsDay').innerHTML = `
        <img src="assets/ghs/${list[idx]}.svg" width="36" style="vertical-align:middle;margin-right:8px">
        <strong style="vertical-align:middle">${list[idx].toUpperCase()}</strong>
        <div class="small" style="margin-top:6px">Waspada dengan simbol ini hari ini!</div>
      `;
    }

    // Tips K3 of the Day
    function renderTips() {
      const tips = [
        'Selalu baca label MSDS sebelum pakai bahan kimia baru.',
        'Gunakan APD yang tepat sebelum bekerja.',
        'Jangan mencampur bahan kimia sembarangan.'
      ];
      document.getElementById('tipsDay').textContent = tips[new Date().getDate() % tips.length];
    }

    // Search filter
    function handleSearch() {
      const query = document.getElementById('search').value.toLowerCase();
      const filtered = allData.filter(d =>
        d.Nama.toLowerCase().includes(query) ||
        d.Formula.toLowerCase().includes(query) ||
        d.Pengujian.toLowerCase().includes(query)
      );
      renderTopGrid(filtered);
    }

    // Init
    (async () => {
      allData = await loadData();
      renderTop5(allData);
      renderTopGrid(allData.slice(0, 8));
      renderGhsDay();
      renderTips();

      document.getElementById('search').addEventListener('input', handleSearch);
    })();
  </script>
</body>
</html>
